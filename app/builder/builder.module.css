/* Builder Module CSS - Premium & Complete Redesign
  Version 6.0: Synced with builder.js structure. Gamified card interactions.
*/

/* -- ============================================= -- */
/* -- Part 0: Design System & Variables (Consistent) -- */
/* -- ============================================= -- */
:root {
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --font-serif-display: "DM Serif Display", serif;
  
  --brand-gradient: linear-gradient(90deg, #5D5CDE, #5685E6);
  --brand-gradient-hover: linear-gradient(90deg, #4c4ae0, #4a77d8);
  
  --bg-main: #f9fafb;
  --bg-panel: #ffffff;
  --bg-interactive: #f3f4f6;
  
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --text-placeholder: #9ca3af;

  --border-primary: #e5e7eb;
  --border-focus: #5D5CDE;

  --action-like: #16a34a;
  --action-dislike: #dc2626;
  --action-edit: #2563eb;
  --action-undo: #f59e0b;
  
  --radius-md: 12px;
  --radius-lg: 16px;
  
  --shadow-subtle: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

  --transition: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* -- ============================================= -- */
/* -- Part 1: Main Layout & Starter Panel (Unchanged) -- */
/* -- ============================================= -- */
.builderPageContainer { display: flex; justify-content: center; align-items: center; padding: 24px; width: 100%; min-height: calc(100vh - 120px); background-color: var(--bg-main); font-family: var(--font-sans); }
.starterPanel { width: 100%; max-width: 580px; height: 100%; max-height: 70vh; background: var(--bg-panel); border-radius: var(--radius-lg); box-shadow: var(--shadow-subtle); border: 1px solid var(--border-primary); padding: 32px; display: flex; flex-direction: column; gap: 24px; animation: fadeIn 0.6s var(--transition) both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
.starterTitle { font-size: clamp(22px, 5vw, 26px); font-weight: 700; color: var(--text-primary); text-align: center; }
.formGroup { display: flex; flex-direction: column; gap: 8px; }
.formGroup.isGrowing { flex-grow: 1; display: flex; flex-direction: column; }
.formLabel { font-size: 14px; font-weight: 500; color: var(--text-primary); }
.formSelect, .formTextarea { width: 100%; padding: 12px 16px; border: 1px solid var(--border-primary); border-radius: var(--radius-md); font-size: 16px; font-family: inherit; background-color: var(--bg-main); color: var(--text-primary); transition: all var(--transition); }
.formSelect { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 16px center; padding-right: 48px; }
.formTextarea { flex-grow: 1; resize: none; }
.formSelect:focus, .formTextarea:focus { outline: none; border-color: var(--border-focus); box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.15); background-color: var(--bg-panel); }
.starterActions { display: flex; flex-direction: column; gap: 12px; margin-top: auto; padding-top: 16px; }
.btnPrimary { width: 100%; padding: 16px; font-size: 16px; font-weight: 600; border-radius: var(--radius-md); border: none; cursor: pointer; background: var(--brand-gradient); color: white; transition: all var(--transition); }
.btnPrimary:hover { background: var(--brand-gradient-hover); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.btnPrimary:disabled { background: #c7c7f0; cursor: not-allowed; transform: none; box-shadow: none; }
.btnSecondary { font-size: 14px; font-weight: 500; color: var(--text-secondary); background: none; border: none; cursor: pointer; padding: 8px; transition: color var(--transition); }
.btnSecondary:hover { color: var(--text-primary); }

/* -- ============================================= -- */
/* -- Part 2: Builder Scroller & Content Cards (REVISED) -- */
/* -- Styles are now targeting classes from builder.js -- */
/* -- ============================================= -- */

.scroller {
  width: 100%;
  max-width: 720px;
  padding: 24px 0;
  display: flex;
  flex-direction: column;
  gap: 32px;
  /* For JS scrolling */
  scroll-padding-top: 40vh;
  scroll-padding-bottom: 40vh;
}

/* :global is used to target classes created by external JS */
:global(.slot) {
  animation: slideInUp 0.7s var(--transition-bounce) both;
}
@keyframes slideInUp {
  from { opacity: 0; transform: translateY(40px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

:global(.card) {
  position: relative;
  background: var(--bg-panel);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-primary);
  box-shadow: var(--shadow-subtle);
  padding: 48px 32px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}

:global(.word) {
  font-family: var(--font-serif-display);
  font-size: clamp(32px, 8vw, 48px);
  font-weight: 400;
  line-height: 1.2;
  color: var(--text-primary);
  text-align: center;
}

:global(.actions) {
  display: flex;
  align-items: center;
  gap: 16px;
  background-color: var(--bg-interactive);
  padding: 8px;
  border-radius: 99px;
  border: 1px solid var(--border-primary);
}

:global(.actionBtn) {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background-color: transparent;
  cursor: pointer;
  transition: all var(--transition-bounce);
  font-size: 20px; /* For text icons */
}

:global(.actionBtn:hover) {
  transform: scale(1.15);
  background-color: white;
  box-shadow: var(--shadow-md);
}
:global(.actionBtn:active) {
  transform: scale(1.05);
}

:global(.like) { color: var(--action-like); }
:global(.dislike) { color: var(--action-dislike); }
:global(.edit) { color: var(--action-edit); }
:global(.undo) { color: var(--action-undo); }


/* -- ============================================= -- */
/* -- Part 3: Floating Actions & Modals (Polished) -- */
/* -- ============================================= -- */
.floatingActions { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); display: flex; gap: 16px; z-index: 1000; padding: 8px; background-color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(8px); border-radius: 99px; box-shadow: var(--shadow-lg); border: 1px solid var(--border-primary); }
.floatingActions .btnPrimary { width: auto; padding: 12px 24px; }
.floatingActions .btnSecondary { width: auto; padding: 12px 24px; border-radius: var(--radius-md); }
.modal { position: fixed; inset: 0; z-index: 2000; display: flex; justify-content: center; align-items: center; padding: 24px; opacity: 0; visibility: hidden; transition: opacity var(--transition), visibility var(--transition); }
.modal.isOpen { opacity: 1; visibility: visible; }
.modalBackdrop { position: absolute; inset: 0; background-color: rgba(17, 24, 39, 0.6); backdrop-filter: blur(4px); }
.modalPanel { position: relative; background: var(--bg-panel); padding: 32px; border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); max-width: 520px; width: 100%; display: flex; flex-direction: column; gap: 16px; transform: scale(0.95); transition: transform var(--transition); }
.modal.isOpen .modalPanel { transform: scale(1); }
.modalTitle { font-size: 24px; font-weight: 700; color: var(--text-primary); }
.previewContent { font-size: 16px; line-height: 1.7; color: var(--text-secondary); max-height: 40vh; overflow-y: auto; }
.modalActions { display: flex; justify-content: flex-end; margin-top: 16px; }

/* -- ============================================= -- */
/* -- Part 4: Responsive Design (Adjusted) -- */
/* -- ============================================= -- */
@media (max-width: 640px) {
  .builderPageContainer { padding: 0; align-items: flex-start; }
  .starterPanel { padding: 24px 16px; border-radius: 0; border: none; max-height: none; min-height: calc(100vh - 100px); }
  .scroller { padding: 16px; }
  :global(.card) { padding: 32px 24px; }
  :global(.word) { font-size: 28px; }
  :global(.actions) { gap: 8px; }
  :global(.actionBtn) { width: 44px; height: 44px; }
  .floatingActions { width: calc(100% - 32px); }
}

